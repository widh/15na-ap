# Project Configuration
PROJECT ( "POSCA Server" )
CMAKE_MINIMUM_REQUIRED ( VERSION 3.8 )
SET ( PROJECT_VERSION_MAJOR 1 )
SET ( PROJECT_VERSION_MINOR 2 )
SET ( CMAKE_BUILD_TYPE Release )
SET ( CMAKE_VERBOSE_MAKEFILE false )

# Add Libraries
# LINK_LIBRARIES ( websocketpp )

# Build Options
# ADD_COMPILE_OPTIONS ( -march=armv7-a )
SET ( CMAKE_C_FLAGS_DEBUG "-g" )
SET ( CMAKE_CXX_STANDARD 17 )
SET ( CMAKE_CXX_STANDARD_REQUIRED ON )

# Generate `connector_users.log.hpp`
# EXECUTE_PROCESS ( bash connector_users.sh )

# Use subdirectories
SET ( POSCA_DIRECTORIES core csi keras ws )
SET ( POSCA_SOURCES common.hpp common.cpp )
FOREACH ( POSCA_DIR ${POSCA_DIRECTORIES} )
  INCLUDE_DIRECTORIES ( ${CMAKE_CURRENT_SOURCE_DIR}/${POSCA_DIR} )
  AUX_SOURCE_DIRECTORY ( ${POSCA_DIR} SOURCES_${POSCA_DIR} )
  FOREACH ( POSCA_SOURCE ${SOURCES_${POSCA_DIR}} )
    LIST ( APPEND POSCA_SOURCES ${POSCA_SOURCE} )
  ENDFOREACH ( POSCA_SOURCE )
ENDFOREACH( POSCA_DIR )
INCLUDE_DIRECTORIES ( ${CMAKE_CURRENT_SOURCE_DIR} )

# Executable
ADD_EXECUTABLE (
  poscas
  ${POSCA_SOURCES}
)
